<div class="chat-history-list">
    <div class="d-flex justify-content-center p-4">
        <button pButton type="button" class="p-button-sm p-button-xs p-button-help"
            style="padding: 6px 40px !important;" (click)="openNewChat()"><i class="pi pi-plus"></i>&nbsp;New Chat
        </button>
    </div>
    <div class="list d-flex">
        <ng-container *ngIf="historyList.length != 0">
            <ng-container *ngFor="let message of historyList;let i = index;">
                <ng-container *ngIf="message.records.length != 0">
                    <div class="head-title">{{message.category}}</div>
                    <ng-container *ngFor="let item of message.records;let r = index;">
                        <div [id]="'row'+i+r" class="flex-parent chat-row " 
                        [ngClass]="getActiveMessage(item._id) == true ? 'active': ''" (click)="editChat(item)"
                        >
                            <div class="flex-child short-and-fixed">
                                <!-- <div *ngIf="item.chat_flow != 'general'">
                                    <svg fill="currentColor" width="22px" height="22px" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet">
                                        <path fill-rule="evenodd" d="M8.35078106,18 L3.62469505,21.7808688 C2.9699317,22.3046795 2,21.8385062 2,21 L2,5 C2,3.34314575 3.34314575,2 5,2 L19,2 C20.6568542,2 22,3.34314575 22,5 L22,15 C22,16.6568542 20.6568542,18 19,18 L8.35078106,18 Z M4,18.9193752 L7.37530495,16.2191312 C7.552618,16.0772808 7.7729285,16 8,16 L19,16 C19.5522847,16 20,15.5522847 20,15 L20,5 C20,4.44771525 19.5522847,4 19,4 L5,4 C4.44771525,4 4,4.44771525 4,5 L4,18.9193752 Z"/>
                                        <path transform="translate(10,16) scale(0.5, 0.5) rotate(-120)" d="M 9 19 a 5.0055 5.0055 0 0 1 -5 -5 V 3 H 6 V 14 a 3 3 0 0 0 6 0 V 5 a 1 1 0 0 0 -2 0 V 15 H 8 V 5 a 3 3 0 0 1 6 0 v 9 A 5.0055 5.0055 0 0 1 9 19 Z" stroke-linecap="round"/>
                                    </svg>
                                </div> -->
                                <!-- <div *ngIf="item.chat_flow == 'general'"> -->
                                <div>
                                    <svg fill="currentColor" width="22px" height="22px" viewBox="0 0 24 24" >
                                        <path fill-rule="evenodd" d="M8.35078106,18 L3.62469505,21.7808688 C2.9699317,22.3046795 2,21.8385062 2,21 L2,5 C2,3.34314575 3.34314575,2 5,2 L19,2 C20.6568542,2 22,3.34314575 22,5 L22,15 C22,16.6568542 20.6568542,18 19,18 L8.35078106,18 Z M4,18.9193752 L7.37530495,16.2191312 C7.552618,16.0772808 7.7729285,16 8,16 L19,16 C19.5522847,16 20,15.5522847 20,15 L20,5 C20,4.44771525 19.5522847,4 19,4 L5,4 C4.44771525,4 4,4.44771525 4,5 L4,18.9193752 Z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="flex-child long-and-truncated title" [title]="item.title">
                                {{item.title}}
                            </div> 
                            <div class="flex-child short-and-fixed">
                                <div>
                                    <a [ngbPopover]="popContent" [popoverTitle]="popTitle"
                                        popoverClass="my-custom-popover-class">
                                        <span class="svg-icon svg-icon-3">
                                            <i class="pi pi-trash" style="font-size: 1rem;"></i>
                                        </span>
                                    </a>
                                    <ng-template #popContent>
                                        <div style="padding: 0px 0px 10px 0px;">This will delete this chat.</div>
                                        <div class="d-flex align-items-center py-1" style="justify-content: center;">
                                            <p-button (click)="deleteConversion(item._id,i,r)" label="Delete"
                                                styleClass="p-button-sm p-button-xs p-button-danger me-3"></p-button>
                                            <p-button label="Cancel"
                                                styleClass="p-button-sm p-button-xs p-button-outlined p-button-secondary"></p-button>
                                        </div>
                                    </ng-template>
                                    <ng-template #popTitle>
                                        <div class="d-flex align-items-center py-1" style="font-weight: 600;color: #000;">{{'Delete Chat?'}}</div>
                                    </ng-template>
                                </div>
                            </div>  
                        </div>
                    </ng-container>
                </ng-container>
            </ng-container>
        </ng-container>
    </div>
</div>